<!DOCTYPE html>
<html>
<head>
  <title>Ecommerce Item Management</title>
</head>
<body style="font-family: Arial; text-align:center; margin-top:40px;">

<h1>üõí Ecommerce Item Management</h1>

<hr>

<h2>üîé Get Item by ID</h2>
<input type="number" id="getId" placeholder="Enter Item ID">
<button onclick="getItem()">Get Item</button>
<h3 id="getResult"></h3>

<hr>

<h2>‚ûï Add New Item</h2>

<input type="number" id="id" placeholder="ID"><br><br>
<input type="text" id="name" placeholder="Name"><br><br>
<input type="text" id="description" placeholder="Description"><br><br>
<input type="number" id="price" placeholder="Price"><br><br>
<input type="text" id="category" placeholder="Category"><br><br>
<input type="number" id="stock" placeholder="Stock Quantity"><br><br>

<button onclick="addItem()">Add Item</button>

<h3 id="postResult"></h3>

<script>
const BASE_URL = "https://item-management-api-1.onrender.com/api/item";

// GET ITEM
async function getItem() {
  const id = document.getElementById("getId").value;

  try {
    const res = await fetch(`${BASE_URL}/${id}`);
    if(!res.ok) throw new Error();
    const data = await res.json();

    document.getElementById("getResult").innerText =
      `Id: ${data.id} | Name: ${data.name} | Description: ${data.description} | Price: ${data.price} | Category: ${data.category} |Stock: ${data.stockQuantity}`;
  } catch {
    document.getElementById("getResult").innerText = "Item not found";
  }
}

// POST ITEM  üëâ /add endpoint
async function addItem() {
  const item = {
    id: document.getElementById("id").value,
    name: document.getElementById("name").value,
    description: document.getElementById("description").value,
    price: document.getElementById("price").value,
    category: document.getElementById("category").value,
    stockQuantity: document.getElementById("stock").value
  };

  try {
    const res = await fetch(`${BASE_URL}/add`, {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify(item)
    });

    if(!res.ok) throw new Error();
    const data = await res.json();

    document.getElementById("postResult").innerText =
      "‚úÖ Item added successfully with ID: " + data.id;

  } catch {
    document.getElementById("postResult").innerText =
      "‚ùå Error adding item (check validations)";
  }
}
</script>

</body>
</html>
